<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<script src="../../bower_components/firebaseui/dist/firebaseui.js"></script>

<!--
`<pup-alert-sign-in>` is Description

@element PupAlertSignInElement
-->
<dom-module id="pup-alert-sign-in">
    <link rel="import" type="css" href="../../bower_components/firebaseui/dist/firebaseui.css">
    <template>
        <style>
            :host {
                display: block
            }
        </style>

        <div id="firebaseui-auth-container"></div>

    </template>

    <script>
        class PupAlertSignInElement extends Polymer.Element {

            static get is() { return 'pup-alert-sign-in'; }

            static get properties() {
                return {
                    app: {
                        type: Object
                    }
                };
            }

            constructor() {
                super();

                // FirebaseUI config.
                this._uiConfig = {
                    signInSuccessUrl: '/',
                    signInOptions: [
                        // Leave the lines as is for the providers you want to offer your users.
                        firebase.auth.GoogleAuthProvider.PROVIDER_ID,
                        firebase.auth.FacebookAuthProvider.PROVIDER_ID,
                        firebase.auth.TwitterAuthProvider.PROVIDER_ID,
                        firebase.auth.EmailAuthProvider.PROVIDER_ID
                    ],
                    // Terms of service url.
                    tosUrl: '/'
                };

                // Initialize the FirebaseUI Widget using Firebase.
                this._ui = new firebaseui.auth.AuthUI(firebase.auth());
            }

            ready() {
                super.ready();

                Polymer.RenderStatus.afterNextRender(this, () => {
                    // The start method will wait until the DOM is loaded.
                    this._ui.start('#firebaseui-auth-container', this._uiConfig);
                });
            }

        }

        window.customElements.define(PupAlertSignInElement.is, PupAlertSignInElement);
    </script>
</dom-module>